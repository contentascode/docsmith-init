language: node_js
sudo: false
node_js:
  - '4.2'
branches:
  except:
    - gh-pages
cache:
  bundler: true
  directories:
    - node_modules
    - /home/travis/.rvm
install:
  - npm i pm2 http-server contentascode/broken-link-checker -g
  - "rvm install $(sed 's/ruby-//g' .ruby-version)"
  - bundle install
deploy:
  skip_cleanup: true
  provider: script
  script: npm run deploy
env:
  global:
    - GH_USERNAME=jmatsushita
    - CONFIG_OWNER=contentascode
    - CONFIG_REPO=docsmith-init
    - secure: >
        "ZXh1G3FFWkbVu1YwXt95jj7ykTa0xtIgaAxOhYjZ2UX5CUt8MhsAqcf9SxV2VLz4e3cCgl5hJKjLFDK99WtZB03x6EnX7jfIkK8F/joGYk4kzjLgIYnQ6wPZmrfChYT2Y0i9Ko7K1Sh9sBuyEwmuVrwrmLQWpZHOc6kCgSEVsc+F1p/t3kGNQO1SnVePCNnNtyX9ZDbMqrdI9KCw8Y3Y39NUryhQ3nj44g58ek0CfVk4T0rjLC13DFBggav7ufBDSJ/vBAjh/rKo0yliuFSHDPygC2JANR2f7aZ20j7505VjkFOjUXZbJqTtSpimLd2fDt4LT5CcZ8gf9YbLhkTxTHgWb+h1ELVWRTubMeYMWCmeuxHP9luTUggB6on0RzSXIM5LeC5PkJo41b6kRO4DrQ3urFMJrykbf1XnuntkJ6z20TL50/Y62jLrFApn5+/WtBaDI9tu4KL/Cv8ga0wOzOkF+mbpxs0EnQlEkXafa/ucHTeu7nScQQe8NbiGa+wk0Wu24w4Mko3yW9qZFt5KO72YgVMwRmBcl+i+RXKq6e0jQCwhj4ogIqbzgLNcn2cI4tsb5OHdPtY4VcPY6abjJF2Oad1l4ukczis2bzQamUw1BsTiKiI9xAE9sAYdlTyVBeRjKqx34XLz2Nd328QH7ut4KPmGENtpRILCkdGB3IY="
