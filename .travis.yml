language: node_js
sudo: false
node_js:
  - '4.2'
branches:
  except:
    - gh-pages
cache:
  bundler: true
  directories:
    - node_modules
    - $HOME/.rvm
    - $HOME/.nvm
install:
  - npm i pm2 http-server contentascode/broken-link-checker -g
  - "rvm install $(sed 's/ruby-//g' .ruby-version)"
  - bundle install
deploy:
  skip_cleanup: true
  provider: script
  script: npm run deploy
env:
  global:
    - GH_USERNAME=jmatsushita
    - CONFIG_OWNER=contentascode
    - CONFIG_REPO=docsmith-init
    - secure: >
        "t7o7hhY22cSTi4pghD4cLO3eO88t8br77kTXm+6KrtvdJSnmIr9sTDXxbS6KMX0VHq5UQqq5A6Bv4HPtb00LPnefqsJGCuppK0LChkWChBOzeaawu9bUWsMqVET/L0YHfpEhc5c+271W/TXNb7DRF1Bo3Q3GW+i8TTw+DweB0JXWQCgP9KsVLJhOQTJYdYLR6OfH4xDB6Gdqja4Z3pNNNXjrYCenTKRH5uZj6XlQDEwC67MbBKVwk/UjUu8qvbBsmDTT5rqc4OBhrHWEdPQBtTotuGB9OGxQUwPGIJ4yU9VL6zdRfTXkupq1ChFMumCf44KVHfgxah72UnJAgFaHA1kuXbT+BtC9MacRYmjfvsC/RH/zYK5fvpeYg1dBbZD+PeYN9xuPYqzEZB+rd70rXlqxMxV+05HgR3YN4Pa7UDq7Y01dhcHUZzMusAJx+Nc6syMlqLIYUlgExn0RXpwjSt1OYDf7UB90V2qBDD0EOGy+keMJIvStfve1xD6VdlIr7M/GnARyOiszwgOHS6f0V0U0ob4oZddS/IH5X5nhOEcVa+RjGvogiKyRSSLqWX9rYa0+TH9+AhRxB0qC1r17SlErIZj8dnSGMBSKfyc1N2P3SG6KH+nbWXMUzTqzrng0gU92WSi1gBOtt4RcT1R5oKGwovNyH1NUMh6PDszqvrA="
